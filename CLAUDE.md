# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

This is a Docusaurus v3-based knowledge base documenting development notes, code snippets, and insights. The site supports both English (default) and German locales.

---

## Development Commands

### Running the Development Server

```bash
npm start              # Start dev server (English)
npm run start:de       # Start dev server (German locale)
```

### Building and Deployment

```bash
npm run build          # Build production site
npm run serve          # Serve production build locally
npm run clear          # Clear Docusaurus cache
npm run typecheck      # Run TypeScript type checking
```

### Translations

```bash
npm run write-translations       # Generate translation files (all locales)
npm run write-translations:de    # Generate German translation files
npm run write-heading-ids        # Auto-generate heading IDs in markdown
```

---

## Project Structure

### Content Organization

- **docs/**: Main content directory containing all knowledge articles
  - Organized by topic: `commercial/`, `frameworks/`, `fundamentals/`, `javascript/`, `rust/`, `tools/`, `typescript/`, `web/`
  - Sidebars are autogenerated from the filesystem structure (see `sidebars.ts`)
  - Each category typically has an `index.mdx` file
  - Content files use frontmatter with `title`, `description`, `keywords`

### Internationalization (i18n)

- **i18n/de/docusaurus-plugin-content-docs/current/**: German translations of docs
  - Mirrors the structure of `docs/` directory
  - `current.json`: Metadata translations for document titles/descriptions
  - When adding new docs, remember to add corresponding German translations

### Configuration

- **docusaurus.config.ts**: Main site configuration
  - Site metadata, URL, i18n settings
  - Plugin configuration: local search, Vercel analytics
  - Theme config: navbar, footer, prism themes
- **sidebars.ts**: Sidebar configuration (autogenerated from docs directory)
- **tsconfig.json**: TypeScript configuration (extends `@docusaurus/tsconfig`)

### Source Files

- **src/pages/**: Custom React pages (homepage, etc.)
- **src/css/custom.css**: Custom CSS overrides
- **static/**: Static assets (images, favicons, etc.)

## Key Architectural Notes

### Sidebar Generation

The sidebar is completely autogenerated from the `docs/` directory structure. To control ordering, use the `sidebar_position` frontmatter field in MDX/MD files, but this isn't necessary most of the time.

### Locale Support

- Default locale: English (`en`)
- Secondary locale: German (`de`)
- Locale switching handled by Docusaurus i18n system
- All UI strings can be translated via `i18n/de/docusaurus-theme-classic/`

### Search

Uses `@easyops-cn/docusaurus-search-local` plugin for local search (no external service needed). Search index includes both English and German content.

## Content Guidelines

### Adding New Documentation

1. Create `.md` or `.mdx` file in appropriate `docs/` subdirectory
2. Add frontmatter with at minimum:

   ```yaml
   ---
   title: "Your Title"
   description: "Brief description"
   keywords: 
    - "Keyword 1 here"
    - "Keyword 2 here"
   ---
   ```

3. For German translation, create the corresponding file in `i18n/de/docusaurus-plugin-content-docs/current/` with the same structure
4. Run `npm run write-translations:de` to autogenerate metadata, then update `i18n/de/docusaurus-plugin-content-docs/current.json` if needed

### Translation Guidelines

- Frontmatter (`title`, `description`, `keywords`) must be translated into the target language
- Contents of fenced code blocks and inline code (backtick-wrapped) must NOT be translated
- Link targets (URLs, relative paths) must not be translated; link display text should be translated
- All links present in the source must also be present in the translation, and vice versa

### File Naming

- Use kebab-case for file names (e.g., `file-naming.md`, `class-id-naming.md`)
- Category index files should be named `index.mdx`

### Markdown Formatting

- **Headings**: Every heading in `.md` files must be surrounded by a blank line (before and after) for proper formatting and readability
- **Lists**: Every list in `.md` files must be surrounded by a blank line (before and after) for proper formatting and readability
- **Code Blocks**: Fenced code blocks should always have a language specified
- **Multiplication sign**: Use `x` (the letter) instead of `×` (Unicode symbol) for multiplication in formulas, to keep content easily searchable
- **Arrow symbol**: Use `=>` (equal sign + greater-than sign) instead of `→` (Unicode symbol)
- **Decimal separator**: German uses `,` (e.g. `0,43`), English uses `.` (e.g. `0.43`)
- **Separators**: Prefer `,` over `-` where grammatically possible (e.g. "sicher, zuverlässig" instead of "sicher - zuverlässig")
- **German abbreviations**: Capitalise correctly, e.g. `z.B.` not `z.b.`
- **Trailing newline**: Every `.md` file must end with exactly one newline character

## Technical Details

- **Node Version**: Requires Node.js >= 20.0
- **Framework**: Docusaurus 3.9.2
- **React**: Version 19
- **TypeScript**: ~5.6.2
- **Production URL**: <https://knowledge.moritz-grimm.dev>
